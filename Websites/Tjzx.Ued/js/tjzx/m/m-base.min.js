/*! tjzx.ued version:0.1.0 2014-05-13 09:51:13 */
var tjzx=window.TJZX=window.TJZX||{};if(top.window&&top.window.Dialog)window.Dialog=top.window.Dialog,window.Alert=top.window.Alert,window.Confirm=top.window.Confirm;else{var Dialog,Alert,Confirm;seajs.use(["plus"],function(a){Dialog=window.Dialog=a.commonInit,Alert=window.Alert=a.alert,Confirm=window.Confirm=a.confirm})}!function(a,b,c){b.getLogger("m-base");a(".btn").removeAttr("disabled"),b.mix(c,{msg:function(a,b){Alert(a,function(){"reload"===b?location.reload(!0):b&&"string"==typeof b&&(location.href=b)})},setBtn:function(b,c){var d=a(b);c?d.removeAttr("disabled").removeClass("disabled"):d.attr("disabled","disabled").addClass("disabled"),d.each(function(a){var b=d.eq(a);if(b.data("state")!=c){var e=b.html();b.html(b.data("tag")||e+"中..."),b.data("tag",e).data("state",c)}})},stateArray:{0:"隐藏",1:"显示",2:"删除"},setStateBtn:function(a,d){var e=this;if(!e||!e.is("a"))return!1;if(b.isBoolean(a)&&!a)e.data("state","").css("color","#333").html("正在提交...");else if(b.isObject(a)){var f=a.state?"Green":"Red",g=a.state?"更新成功":a.msg||"更新失败！";e.data("state","").css("color",f).html(g),setTimeout(function(){e.data("state",d).css("color","#428BCA").html(c.stateArray[d])},1200)}},getJson:function(d,e,f,g){b.mix(e,{t:Math.random()}),a.ajax({url:d,type:"post",dataType:"json",data:e,success:function(a){return a&&-1==a.state?(Alert(a.msg||"操作异常！",function(){top.window.location.href="/m/login?return_url="+encodeURIComponent(top.window.location.href),c.setFrameHeight()}),!1):void(f&&b.isFunction(f)&&f(a))},error:function(a){g?b.isFunction(g)&&g(a):Alert(a.statusText||"获取数据异常！")}})},setFrameHeight:function(){top.window&&top.window.SetFrameHeight&&top.window.SetFrameHeight()}})}(jQuery,SINGER,TJZX),$(".m-panel-title").delegate("li","click",function(){if($(this).hasClass("active"))return!1;var a=$(this),b=a.parents(".m-panel").find(".m-panel-item"),c=a.parent().find("li").index(a);a.parent().find(".m-panel-add").remove(),a.addClass("active").siblings("li").removeClass("active"),b.hide().eq(c).fadeIn(),TJZX.setFrameHeight()});