/*! tjzx.ued version:0.1.0 2014-05-13 09:51:13 */
var decToHex=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=("00"+a.charCodeAt(c).toString(16)).slice(-4);return"\\u"+b.join("\\u")},hexToDec=function(a){return a=a.replace(/\\/g,"%"),unescape(a)};!function(a,b,c){c.getLogger("homeConfig");a(".m-table").delegate(".j-edit","click",function(){for(var b=a(this),c=b.parents("tr"),d=c.find("td"),e=1;e<d.length-1;e++){var f=d.eq(e);f.data("html",f.html());var g="",h=f.children().get(0);if(h)switch(h.tagName.toLowerCase()){case"img":g=h.getAttribute("src");break;case"i":g=decToHex(h.innerHTML)}else g=f.text();f.html('<input type="text" class="text" name="'+f.data("name")+'" value="'+g+'" />')}b.parent().html('<a href="#" class="j-save">保存</a><a href="#" class="j-cancel">取消编辑</a>')}).delegate(".j-cancel","click",function(){for(var b=a(this),c=b.parents("tr"),d=c.find("td"),e=1;e<d.length-1;e++){var f=d.eq(e);f.html(f.data("html"))}b.parent().html('<a href="#" class="j-edit">编辑</a>')}).delegate(".j-save","click",function(){var c=a(this),d=c.parents("tr"),e=d.valid(),f=e.json();f.Id=d.data("id"),f.Icon&&(f.Icon=encodeURIComponent(f.Icon.replace(/\\u/i,"&#x")));var g="update_"+d.parents("table").data("type");b.getJson("/m/homeconfig/"+g,f,function(a){a&&1===a.state?Alert(a.msg||"更新成功！",function(){location.reload(!0)}):Alert(a.msg||"更新异常！")})})}(jQuery,TJZX,SINGER);